<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Gift Challenge ğŸ±ğŸ’—</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #fff0f3, #ffb3c1);
    font-family: 'Comic Sans MS', cursive;
    text-align: center;
    color: #d63384;
}

h1 {
    font-size: 2.8em;
    margin-top: 40px;
    color: #ff1493;
}

#container {
    position: relative;
    width: 90%;
    max-width: 800px;
    height: 70vh;
    margin: 40px auto;
    border: 8px solid #ff69b4;
    border-radius: 30px;
    background: white;
    overflow: hidden;
}

canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}

button {
    padding: 15px 50px;
    font-size: 1.4em;
    border: none;
    border-radius: 50px;
    margin: 20px;
    cursor: pointer;
    transition: 0.3s;
}

#done-btn {
    background: #ff69b4;
    color: white;
}

#done-btn:hover {
    background: #ff1493;
    transform: scale(1.1);
}

#clear-btn {
    background: #ffe4e1;
    color: #d63384;
}

#success {
    display: none;
    font-size: 2em;
    margin-top: 40px;
    color: #ff1493;
}
</style>
</head>

<body>

<h1>Draw Increase in Love & Cuteness ğŸ’•</h1>

<div id="container">
    <canvas id="graph"></canvas>
    <canvas id="draw"></canvas>
</div>

<button id="done-btn">Done ğŸ’•</button>
<button id="clear-btn">Clear</button>

<div id="success">
    Correcttt ğŸ˜ŒğŸ’—<br><br>
    <button onclick="window.location.href='journey.html'">Next Test â†’</button>
</div>

<script>
const graph = document.getElementById("graph");
const draw = document.getElementById("draw");
const ctxGraph = graph.getContext("2d");
const ctxDraw = draw.getContext("2d");

function resize() {
    graph.width = draw.width = graph.offsetWidth;
    graph.height = draw.height = graph.offsetHeight;
    drawAxes();
}
window.addEventListener("resize", resize);
resize();

function drawAxes() {
    ctxGraph.clearRect(0,0,graph.width,graph.height);
    ctxGraph.lineWidth = 5;
    ctxGraph.strokeStyle = "#444";

    const m = 80;

    ctxGraph.beginPath();
    ctxGraph.moveTo(m, m);
    ctxGraph.lineTo(m, graph.height - m);
    ctxGraph.lineTo(graph.width - m, graph.height - m);
    ctxGraph.stroke();
}

// -------- SMOOTH DRAWING --------
let drawing = false;
let lastX = 0;
let lastY = 0;

ctxDraw.lineCap = "round";
ctxDraw.lineJoin = "round";
ctxDraw.strokeStyle = "#ff69b4";
ctxDraw.lineWidth = 6;

function getPos(e){
    const rect = draw.getBoundingClientRect();
    return {
        x: (e.clientX || e.touches?.[0]?.clientX) - rect.left,
        y: (e.clientY || e.touches?.[0]?.clientY) - rect.top
    };
}

function start(e){
    drawing = true;
    const pos = getPos(e);
    lastX = pos.x;
    lastY = pos.y;
    ctxDraw.beginPath();
    ctxDraw.moveTo(lastX,lastY);
}

function drawLine(e){
    if(!drawing) return;
    const pos = getPos(e);

    ctxDraw.beginPath();
    ctxDraw.moveTo(lastX,lastY);
    ctxDraw.quadraticCurveTo(lastX,lastY,(lastX+pos.x)/2,(lastY+pos.y)/2);
    ctxDraw.stroke();

    lastX = pos.x;
    lastY = pos.y;
}

function stop(){
    drawing = false;
}

draw.addEventListener("pointerdown", start);
draw.addEventListener("pointermove", drawLine);
draw.addEventListener("pointerup", stop);
draw.addEventListener("pointerleave", stop);

document.getElementById("clear-btn").onclick = () => {
    ctxDraw.clearRect(0,0,draw.width,draw.height);
    document.getElementById("success").style.display="none";
};

document.getElementById("done-btn").onclick = () => {
    document.getElementById("success").style.display="block";
    confetti({particleCount:200,spread:120});
};
</script>

</body>
</html>
